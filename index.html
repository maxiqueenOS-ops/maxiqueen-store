<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>MAXIQUEEN OS â€” Page Editor ðŸ‘‘</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- CodeMirror -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material-darker.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/eclipse.min.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/htmlmixed/htmlmixed.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/css/css.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/javascript/javascript.min.js"></script>

<style>
:root{
  --bg:#0d0d0d;
  --panel:#111;
  --accent:#FFD700;
}
body{
  margin:0;
  height:100vh;
  display:flex;
  flex-direction:column;
  background:var(--bg);
  color:white;
  font-family:Arial;
}
header{
  background:black;
  padding:10px;
  border-bottom:2px solid var(--accent);
  text-align:center;
  font-weight:bold;
}
#toolbar{
  background:black;
  padding:6px;
  display:flex;
  gap:8px;
  justify-content:center;
}
button{
  background:var(--accent);
  border:none;
  padding:6px 12px;
  cursor:pointer;
  font-weight:bold;
  border-radius:6px;
}
#main{
  flex:1;
  display:flex;
}
#editors{
  width:50%;
  display:flex;
  flex-direction:column;
  border-right:2px solid var(--accent);
}
.tabs{
  display:flex;
}
.tabs button{
  flex:1;
  background:#111;
  color:white;
}
.tabs button.active{
  background:var(--accent);
  color:black;
}
.editor{
  flex:1;
}
#preview{
  flex:1;
  border:none;
  background:white;
}
.hidden{display:none}
#output{
  background:#000;
  color:#0f0;
  padding:10px;
  font-size:12px;
  max-height:160px;
  overflow:auto;
}
</style>
</head>

<body>

<header>ðŸ‘‘ MAXIQUEEN OS â€” Editor Universal de PÃ¡ginas</header>

<div id="toolbar">
  <button onclick="run()">â–¶ Run</button>
  <button onclick="toggleEditors()">ðŸ“¦ Code</button>
  <button onclick="toggleTheme()">ðŸŒ— Theme</button>
  <button onclick="save()">ðŸ’¾ Save</button>
  <button onclick="exportHTML()">ðŸ“¤ Export</button>
</div>

<div id="main">
  <div id="editors">
    <div class="tabs">
      <button class="active" onclick="switchTab('html')">HTML</button>
      <button onclick="switchTab('css')">CSS</button>
      <button onclick="switchTab('js')">JS</button>
    </div>
    <div id="html" class="editor"></div>
    <div id="css" class="editor hidden"></div>
    <div id="js" class="editor hidden"></div>
  </div>
  <iframe id="preview"></iframe>
</div>

<pre id="output" class="hidden"></pre>

<script>
let theme = "material-darker";
let visible = true;

const editors = {
  html: CodeMirror(document.getElementById("html"),{
    mode:"htmlmixed", theme, lineNumbers:true
  }),
  css: CodeMirror(document.getElementById("css"),{
    mode:"css", theme, lineNumbers:true
  }),
  js: CodeMirror(document.getElementById("js"),{
    mode:"javascript", theme, lineNumbers:true
  })
};

editors.html.setValue(`<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Nueva PÃ¡gina MAXIQUEEN</title>
</head>
<body>
<h1>ðŸ‘‘ Hola desde MAXIQUEEN OS</h1>
<p>Edita esta pÃ¡gina y expÃ³rtala.</p>
</body>
</html>`);

function switchTab(tab){
  document.querySelectorAll(".tabs button").forEach(b=>b.classList.remove("active"));
  event.target.classList.add("active");
  Object.keys(editors).forEach(k=>{
    document.getElementById(k).classList.toggle("hidden",k!==tab);
    editors[k].refresh();
  });
}

function run(){
  const code = `
  <style>${editors.css.getValue()}</style>
  ${editors.html.getValue()}
  <script>${editors.js.getValue()}<\/script>
  `;
  document.getElementById("preview").srcdoc = code;
}

function toggleEditors(){
  visible=!visible;
  document.getElementById("editors").style.display = visible?"flex":"none";
}

function toggleTheme(){
  theme = theme==="material-darker"?"eclipse":"material-darker";
  Object.values(editors).forEach(e=>e.setOption("theme",theme));
}

function save(){
  localStorage.setItem("maxiqueen-page-editor",JSON.stringify({
    html:editors.html.getValue(),
    css:editors.css.getValue(),
    js:editors.js.getValue()
  }));
  alert("ðŸ’¾ Guardado localmente");
}

function exportHTML(){
  const blob = new Blob([
    `<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Export MAXIQUEEN</title>
<style>
${editors.css.getValue()}
</style>
</head>
<body>
${editors.html.getValue()}
<script>
${editors.js.getValue()}
<\/script>
</body>
</html>`
  ],{type:"text/html"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "pagina-maxiqueen.html";
  a.click();
}

document.addEventListener("keydown",e=>{
  if(e.ctrlKey && e.key==="Enter") run();
  if(e.ctrlKey && e.key==="s"){ e.preventDefault(); save(); }
  if(e.ctrlKey && e.key==="b") toggleEditors();
  if(e.ctrlKey && e.shiftKey && e.key==="D") toggleTheme();
});

run();
</script>

</body>
</html>
